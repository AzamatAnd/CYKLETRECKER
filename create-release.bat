@echo off
title Cycle Tracker - Create Release
color 0B

echo.
echo ================================================================
echo                    CYCLE TRACKER - CREATE RELEASE
echo ================================================================
echo.

REM ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð¿Ð°Ð¿ÐºÐµ
if not exist "app\build.gradle.kts" (
    echo ÐžÐ¨Ð˜Ð‘ÐšÐ: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸Ð· Ð¿Ð°Ð¿ÐºÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°!
    pause
    exit /b 1
)

echo [1/5] Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ñ€ÐµÐ»Ð¸Ð·Ð°...
set /p version="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²ÐµÑ€ÑÐ¸ÑŽ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: v1.0.0): "
if "%version%"=="" (
    echo ÐžÐ¨Ð˜Ð‘ÐšÐ: Ð’ÐµÑ€ÑÐ¸Ñ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ð¾Ð¹!
    pause
    exit /b 1
)

set /p release_notes="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ€ÐµÐ»Ð¸Ð·Ð° (Ð¸Ð»Ð¸ Enter Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾): "
if "%release_notes%"=="" (
    set release_notes=Release %version% - Cycle Tracker Android App
)

echo.
echo [2/5] Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð²ÑÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ...
git add .

echo [3/5] Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚...
git commit -m "Release %version%: %release_notes%"

echo [4/5] Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ñ‚ÐµÐ³ Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼...
git tag %version%
git push origin main
git push origin %version%

echo [5/5] ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ»Ð¸Ð·Ð°...
echo.
echo ================================================================
echo                        Ð Ð•Ð—Ð£Ð›Ð¬Ð¢ÐÐ¢
echo ================================================================
echo.
echo âœ… Ð ÐµÐ»Ð¸Ð· %version% ÑÐ¾Ð·Ð´Ð°Ð½!
echo.
echo ðŸ“± GitHub Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÑÑ‚ Ñ€ÐµÐ»Ð¸Ð· Ñ APK...
echo    ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ ÑÑ‚Ð¾ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ 2-5 Ð¼Ð¸Ð½ÑƒÑ‚
echo.
echo ðŸ”— Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ€ÐµÐ»Ð¸Ð· Ð¼Ð¾Ð¶Ð½Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð´ÐµÑÑŒ:
echo    https://github.com/AzamatAnd/CYKLETRECKER/releases
echo.
echo ================================================================

echo.
echo ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð»ÑŽÐ±ÑƒÑŽ ÐºÐ»Ð°Ð²Ð¸ÑˆÑƒ Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð°...
pause >nul